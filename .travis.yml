language: python
python:
  - '3.4'
  - "3.5"

env:
  global:
    - GIT_NAME: "Richard Chien"
    - GIT_EMAIL: richardchienthebest@gmail.com

before_install:
  - nvm install 4

install:
  - pip install .
  - pip install -r test-requirements.txt

script:
  - export VERIPRESS_INSTANCE_PATH=$(pwd)/veripress_tests/instance
  - coverage run --source veripress -m py.test veripress_tests
  - export VERIPRESS_INSTANCE_PATH=$(pwd)/veripress_demo_instance
  - veripress generate --app-root /demo/
  - export VERIPRESS_INSTANCE_PATH=$(pwd)/veripress_docs
  - veripress generate --app-root /docs/

after_success:
  - coveralls
  - chmod +x update-gh-pages.sh && ./update-gh-pages.sh